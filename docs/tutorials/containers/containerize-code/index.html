<!doctype html>
<html lang="en-GB" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorials/containers/containerize-code" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Containerize Your Code | ACE UGANDA HPC Wiki</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ace-bioinformatics.github.io/ace-ug-hpc-wiki/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ace-bioinformatics.github.io/ace-ug-hpc-wiki/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://ace-bioinformatics.github.io/ace-ug-hpc-wiki/docs/tutorials/containers/containerize-code"><meta data-rh="true" property="og:locale" content="en_GB"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Containerize Your Code | ACE UGANDA HPC Wiki"><meta data-rh="true" name="description" content="This tutorial teaches you how to create container images for your applications using Dockerfiles. By the end, you&#x27;ll be able to package any application into a portable container."><meta data-rh="true" property="og:description" content="This tutorial teaches you how to create container images for your applications using Dockerfiles. By the end, you&#x27;ll be able to package any application into a portable container."><link data-rh="true" rel="icon" href="https://ace.ac.ug/wp-content/uploads/2022/04/cropped-android-chrome-512x512-2.png"><link data-rh="true" rel="canonical" href="https://ace-bioinformatics.github.io/ace-ug-hpc-wiki/docs/tutorials/containers/containerize-code"><link data-rh="true" rel="alternate" href="https://ace-bioinformatics.github.io/ace-ug-hpc-wiki/docs/tutorials/containers/containerize-code" hreflang="en-GB"><link data-rh="true" rel="alternate" href="https://ace-bioinformatics.github.io/ace-ug-hpc-wiki/docs/tutorials/containers/containerize-code" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Containerize Your Code","item":"https://ace-bioinformatics.github.io/ace-ug-hpc-wiki/docs/tutorials/containers/containerize-code"}]}</script><link rel="alternate" type="application/rss+xml" href="/ace-ug-hpc-wiki/blog/rss.xml" title="ACE UGANDA HPC Wiki RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ace-ug-hpc-wiki/blog/atom.xml" title="ACE UGANDA HPC Wiki Atom Feed"><link rel="stylesheet" href="/ace-ug-hpc-wiki/assets/css/styles.8c2d5ab2.css">
<script src="/ace-ug-hpc-wiki/assets/js/runtime~main.8c0828fe.js" defer="defer"></script>
<script src="/ace-ug-hpc-wiki/assets/js/main.21391bb6.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/ace-ug-hpc-wiki/img/ace.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ace-ug-hpc-wiki/"><div class="navbar__logo"><img src="/ace-ug-hpc-wiki/img/ace.png" alt="ACE logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/ace-ug-hpc-wiki/img/ace.png" alt="ACE logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">ACE UGANDA HPC WIKI</b></a><a class="navbar__item navbar__link" href="/ace-ug-hpc-wiki/docs/getting-started/accounts">Wiki</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/ace-bioinformatics/ace-hpc-wiki" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ace-ug-hpc-wiki/docs/intro"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/ace-ug-hpc-wiki/docs/getting-started/accounts"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/ace-ug-hpc-wiki/docs/hardware/overview"><span title="Hardware" class="categoryLinkLabel_W154">Hardware</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/ace-ug-hpc-wiki/docs/running-jobs/slurm-basics"><span title="Running Jobs" class="categoryLinkLabel_W154">Running Jobs</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/ace-ug-hpc-wiki/docs/software/installed"><span title="Software" class="categoryLinkLabel_W154">Software</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/ace-ug-hpc-wiki/docs/support/faq"><span title="Support" class="categoryLinkLabel_W154">Support</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/ace-ug-hpc-wiki/docs/tutorials/overview"><span title="Tutorials" class="categoryLinkLabel_W154">Tutorials</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ace-ug-hpc-wiki/docs/tutorials/overview"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/ace-ug-hpc-wiki/docs/tutorials/containers/intro"><span title="Containers" class="categoryLinkLabel_W154">Containers</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ace-ug-hpc-wiki/docs/tutorials/containers/intro"><span title="What are Containers ?" class="linkLabel_WmDU">What are Containers ?</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ace-ug-hpc-wiki/docs/tutorials/containers/containerize-code"><span title="Containerize Your Code" class="linkLabel_WmDU">Containerize Your Code</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ace-ug-hpc-wiki/docs/tutorials/containers/containers-hpc"><span title="Containers on HPC" class="linkLabel_WmDU">Containers on HPC</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ace-ug-hpc-wiki/docs/tutorials/containers/advanced-builds"><span title="Advanced Build Topics" class="linkLabel_WmDU">Advanced Build Topics</span></a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/ace-ug-hpc-wiki/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Tutorials</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Containers</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Containerize Your Code</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Containerize Your Code</h1></header>
<p>This tutorial teaches you how to create container images for your applications using Dockerfiles. By the end, you&#x27;ll be able to package any application into a portable container.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="learning-objectives">Learning Objectives<a href="#learning-objectives" class="hash-link" aria-label="Direct link to Learning Objectives" title="Direct link to Learning Objectives" translate="no">​</a></h2>
<p>After completing this tutorial, you will be able to:</p>
<ul>
<li class="">Write Dockerfiles from scratch</li>
<li class="">Understand Dockerfile instructions and best practices</li>
<li class="">Build container images using Docker</li>
<li class="">Push images to container registries</li>
<li class="">Create reproducible research environments</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-a-dockerfile">What is a Dockerfile?<a href="#what-is-a-dockerfile" class="hash-link" aria-label="Direct link to What is a Dockerfile?" title="Direct link to What is a Dockerfile?" translate="no">​</a></h2>
<p>A <strong>Dockerfile</strong> is a text file containing instructions for building a container image. Think of it as a recipe that describes:</p>
<ol>
<li class="">What base operating system to use</li>
<li class="">What software to install</li>
<li class="">What files to include</li>
<li class="">How to configure the environment</li>
<li class="">What command to run by default</li>
</ol>
<p>Here&#x27;s a simple example:</p>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Start from a Python base image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM python:3.11-slim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Install dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN pip install numpy pandas matplotlib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set the working directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy your code into the container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY analysis.py .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Define the default command</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD [&quot;python&quot;, &quot;analysis.py&quot;]</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="dockerfile-instructions-reference">Dockerfile Instructions Reference<a href="#dockerfile-instructions-reference" class="hash-link" aria-label="Direct link to Dockerfile Instructions Reference" title="Direct link to Dockerfile Instructions Reference" translate="no">​</a></h2>
<table><thead><tr><th>Instruction</th><th>Purpose</th><th>Example</th></tr></thead><tbody><tr><td><code>FROM</code></td><td>Set the base image</td><td><code>FROM python:3.11-slim</code></td></tr><tr><td><code>RUN</code></td><td>Execute commands during build</td><td><code>RUN pip install numpy</code></td></tr><tr><td><code>COPY</code></td><td>Copy files from host to image</td><td><code>COPY src/ /app/</code></td></tr><tr><td><code>ADD</code></td><td>Copy files (with URL/tar support)</td><td><code>ADD data.tar.gz /data/</code></td></tr><tr><td><code>WORKDIR</code></td><td>Set working directory</td><td><code>WORKDIR /app</code></td></tr><tr><td><code>ENV</code></td><td>Set environment variables</td><td><code>ENV PATH=/app:$PATH</code></td></tr><tr><td><code>ARG</code></td><td>Define build-time variables</td><td><code>ARG VERSION=1.0</code></td></tr><tr><td><code>EXPOSE</code></td><td>Document exposed ports</td><td><code>EXPOSE 8080</code></td></tr><tr><td><code>CMD</code></td><td>Default command to run</td><td><code>CMD [&quot;python&quot;, &quot;app.py&quot;]</code></td></tr><tr><td><code>ENTRYPOINT</code></td><td>Configure container executable</td><td><code>ENTRYPOINT [&quot;python&quot;]</code></td></tr><tr><td><code>LABEL</code></td><td>Add metadata</td><td><code>LABEL version=&quot;1.0&quot;</code></td></tr><tr><td><code>USER</code></td><td>Set the user</td><td><code>USER appuser</code></td></tr></tbody></table>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="exercise-1-your-first-dockerfile">Exercise 1: Your First Dockerfile<a href="#exercise-1-your-first-dockerfile" class="hash-link" aria-label="Direct link to Exercise 1: Your First Dockerfile" title="Direct link to Exercise 1: Your First Dockerfile" translate="no">​</a></h2>
<p>Let&#x27;s create a simple Python container step by step.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-1-create-a-project-directory">Step 1: Create a Project Directory<a href="#step-1-create-a-project-directory" class="hash-link" aria-label="Direct link to Step 1: Create a Project Directory" title="Direct link to Step 1: Create a Project Directory" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p ~/my-container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/my-container</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-2-create-a-python-script">Step 2: Create a Python Script<a href="#step-2-create-a-python-script" class="hash-link" aria-label="Direct link to Step 2: Create a Python Script" title="Direct link to Step 2: Create a Python Script" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; hello.py &lt;&lt; &#x27;EOF&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#!/usr/bin/env python3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;&quot;&quot;Simple hello world script.&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import sys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import platform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def main():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;=&quot; * 50)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;Hello from inside a container!&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;=&quot; * 50)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(f&quot;Python version: {sys.version}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(f&quot;Platform: {platform.platform()}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(f&quot;Architecture: {platform.machine()}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;=&quot; * 50)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == &quot;__main__&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-3-write-the-dockerfile">Step 3: Write the Dockerfile<a href="#step-3-write-the-dockerfile" class="hash-link" aria-label="Direct link to Step 3: Write the Dockerfile" title="Direct link to Step 3: Write the Dockerfile" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; Dockerfile &lt;&lt; &#x27;EOF&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Use official Python image as base</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM python:3.11-slim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Add metadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LABEL maintainer=&quot;your.email@example.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LABEL description=&quot;My first container&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LABEL version=&quot;1.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set working directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy the script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY hello.py .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Run the script by default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD [&quot;python&quot;, &quot;hello.py&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-4-build-the-image">Step 4: Build the Image<a href="#step-4-build-the-image" class="hash-link" aria-label="Direct link to Step 4: Build the Image" title="Direct link to Step 4: Build the Image" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Build the image with a tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker build -t my-hello:1.0 .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># List your images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker images | grep my-hello</span><br></span></code></pre></div></div>
<p><strong>Expected output:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">my-hello    1.0    abc123def    10 seconds ago    125MB</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-5-run-the-container">Step 5: Run the Container<a href="#step-5-run-the-container" class="hash-link" aria-label="Direct link to Step 5: Run the Container" title="Direct link to Step 5: Run the Container" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run my-hello:1.0</span><br></span></code></pre></div></div>
<p><strong>Expected output:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">==================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello from inside a container!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Python version: 3.11.x (main, ...) [GCC ...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Platform: Linux-...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Architecture: x86_64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==================================================</span><br></span></code></pre></div></div>
<p>Congratulations! You&#x27;ve built and run your first container.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="understanding-base-images">Understanding Base Images<a href="#understanding-base-images" class="hash-link" aria-label="Direct link to Understanding Base Images" title="Direct link to Understanding Base Images" translate="no">​</a></h2>
<p>The <code>FROM</code> instruction specifies your starting point. Choosing the right base image is important.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-base-images">Common Base Images<a href="#common-base-images" class="hash-link" aria-label="Direct link to Common Base Images" title="Direct link to Common Base Images" translate="no">​</a></h3>
<table><thead><tr><th>Image</th><th>Size</th><th>Use Case</th></tr></thead><tbody><tr><td><code>ubuntu:22.04</code></td><td>~77MB</td><td>General purpose, familiar environment</td></tr><tr><td><code>debian:bookworm-slim</code></td><td>~74MB</td><td>Stable, minimal Debian</td></tr><tr><td><code>alpine:3.18</code></td><td>~7MB</td><td>Minimal, security-focused (may have compatibility issues)</td></tr><tr><td><code>python:3.11</code></td><td>~1GB</td><td>Full Python with build tools</td></tr><tr><td><code>python:3.11-slim</code></td><td>~125MB</td><td>Python without extras</td></tr><tr><td><code>python:3.11-alpine</code></td><td>~50MB</td><td>Smallest Python (limited compatibility)</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="choosing-a-base-image">Choosing a Base Image<a href="#choosing-a-base-image" class="hash-link" aria-label="Direct link to Choosing a Base Image" title="Direct link to Choosing a Base Image" translate="no">​</a></h3>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># For Python data science work</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM python:3.11-slim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># For R analysis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM rocker/r-ver:4.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># For bioinformatics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM ubuntu:22.04</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># For machine learning with GPU</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM nvidia/cuda:12.2.0-runtime-ubuntu22.04</span><br></span></code></pre></div></div>
<p><strong>Recommendation</strong>: Start with <code>-slim</code> variants for a good balance of size and compatibility.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="exercise-2-python-data-science-container">Exercise 2: Python Data Science Container<a href="#exercise-2-python-data-science-container" class="hash-link" aria-label="Direct link to Exercise 2: Python Data Science Container" title="Direct link to Exercise 2: Python Data Science Container" translate="no">​</a></h2>
<p>Let&#x27;s build a more realistic container for data science work.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-1-create-project-files">Step 1: Create Project Files<a href="#step-1-create-project-files" class="hash-link" aria-label="Direct link to Step 1: Create Project Files" title="Direct link to Step 1: Create Project Files" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p ~/datascience-container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/datascience-container</span><br></span></code></pre></div></div>
<p>Create a requirements file:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; requirements.txt &lt;&lt; &#x27;EOF&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">numpy==1.24.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pandas==2.0.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">matplotlib==3.7.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">seaborn==0.12.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scikit-learn==1.3.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<p>Create an analysis script:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; analyze.py &lt;&lt; &#x27;EOF&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#!/usr/bin/env python3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;&quot;&quot;Sample data analysis script.&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import numpy as np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import pandas as pd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import matplotlib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">matplotlib.use(&#x27;Agg&#x27;)  # Use non-interactive backend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import matplotlib.pyplot as plt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import seaborn as sns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from sklearn.datasets import load_iris</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from sklearn.model_selection import train_test_split</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from sklearn.ensemble import RandomForestClassifier</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def main():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;Loading iris dataset...&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    iris = load_iris()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    df = pd.DataFrame(iris.data, columns=iris.feature_names)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    df[&#x27;species&#x27;] = iris.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(f&quot;Dataset shape: {df.shape}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(f&quot;\nDataset summary:\n{df.describe()}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Simple ML model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    X_train, X_test, y_train, y_test = train_test_split(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        iris.data, iris.target, test_size=0.2, random_state=42</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    clf = RandomForestClassifier(n_estimators=100, random_state=42)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    clf.fit(X_train, y_train)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    accuracy = clf.score(X_test, y_test)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(f&quot;\nRandom Forest Accuracy: {accuracy:.2%}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Create a plot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    plt.figure(figsize=(10, 6))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sns.pairplot(df, hue=&#x27;species&#x27;, diag_kind=&#x27;hist&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    plt.savefig(&#x27;/output/iris_analysis.png&#x27;, dpi=150, bbox_inches=&#x27;tight&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;\nPlot saved to /output/iris_analysis.png&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == &quot;__main__&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-2-write-the-dockerfile">Step 2: Write the Dockerfile<a href="#step-2-write-the-dockerfile" class="hash-link" aria-label="Direct link to Step 2: Write the Dockerfile" title="Direct link to Step 2: Write the Dockerfile" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; Dockerfile &lt;&lt; &#x27;EOF&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Python data science container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM python:3.11-slim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Metadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LABEL maintainer=&quot;your.email@example.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LABEL description=&quot;Python data science environment&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LABEL version=&quot;1.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Install system dependencies for matplotlib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    libgomp1 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;&amp; rm -rf /var/lib/apt/lists/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set working directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy and install Python dependencies first (for caching)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY requirements.txt .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN pip install --no-cache-dir -r requirements.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy application code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY analyze.py .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Create output directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN mkdir -p /output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Default command</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD [&quot;python&quot;, &quot;analyze.py&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-3-build-and-test">Step 3: Build and Test<a href="#step-3-build-and-test" class="hash-link" aria-label="Direct link to Step 3: Build and Test" title="Direct link to Step 3: Build and Test" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Build the image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker build -t datascience:1.0 .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Create a local output directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Run with volume mount for output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker run -v $(pwd)/output:/output datascience:1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check the output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ls -la output/</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="working-with-files-and-dependencies">Working with Files and Dependencies<a href="#working-with-files-and-dependencies" class="hash-link" aria-label="Direct link to Working with Files and Dependencies" title="Direct link to Working with Files and Dependencies" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="copying-files">Copying Files<a href="#copying-files" class="hash-link" aria-label="Direct link to Copying Files" title="Direct link to Copying Files" translate="no">​</a></h3>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Copy a single file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY script.py /app/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy multiple files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY script1.py script2.py /app/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy a directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY src/ /app/src/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy with a different name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY local-config.yaml /app/config.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy everything (use .dockerignore to exclude files)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY . /app/</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="using-dockerignore">Using .dockerignore<a href="#using-dockerignore" class="hash-link" aria-label="Direct link to Using .dockerignore" title="Direct link to Using .dockerignore" translate="no">​</a></h3>
<p>Create a <code>.dockerignore</code> file to exclude files from the build:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; .dockerignore &lt;&lt; &#x27;EOF&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.gitignore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Python</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">__pycache__</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*.pyc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*.pyo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.pytest_cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.venv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">venv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># IDE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.vscode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.idea</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*.swp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Data files (usually too large)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*.csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*.parquet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Docker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Dockerfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.dockerignore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="installing-system-packages">Installing System Packages<a href="#installing-system-packages" class="hash-link" aria-label="Direct link to Installing System Packages" title="Direct link to Installing System Packages" translate="no">​</a></h3>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Debian/Ubuntu based images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    build-essential \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    git \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;&amp; rm -rf /var/lib/apt/lists/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Alpine based images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apk add --no-cache \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    build-base \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    git</span><br></span></code></pre></div></div>
<p><strong>Best Practice</strong>: Always combine <code>apt-get update</code> with <code>apt-get install</code> in the same <code>RUN</code> command, and clean up afterward.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="exercise-3-r-statistical-container">Exercise 3: R Statistical Container<a href="#exercise-3-r-statistical-container" class="hash-link" aria-label="Direct link to Exercise 3: R Statistical Container" title="Direct link to Exercise 3: R Statistical Container" translate="no">​</a></h2>
<p>Let&#x27;s create a container for R analysis.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-1-create-project-files-1">Step 1: Create Project Files<a href="#step-1-create-project-files-1" class="hash-link" aria-label="Direct link to Step 1: Create Project Files" title="Direct link to Step 1: Create Project Files" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p ~/r-container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/r-container</span><br></span></code></pre></div></div>
<p>Create an R script:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; analysis.R &lt;&lt; &#x27;EOF&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#!/usr/bin/env Rscript</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Sample R analysis script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">library(tidyverse)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat(&quot;=&quot; , rep(&quot;=&quot;, 48), &quot;=\n&quot;, sep=&quot;&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat(&quot;R Analysis Container\n&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat(&quot;=&quot; , rep(&quot;=&quot;, 48), &quot;=\n&quot;, sep=&quot;&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat(&quot;\nR version:&quot;, R.version.string, &quot;\n&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat(&quot;tidyverse version:&quot;, as.character(packageVersion(&quot;tidyverse&quot;)), &quot;\n&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Create sample data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set.seed(42)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data &lt;- tibble(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  x = rnorm(100),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  y = 2 * x + rnorm(100, sd = 0.5),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  group = sample(c(&quot;A&quot;, &quot;B&quot;), 100, replace = TRUE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat(&quot;\nDataset summary:\n&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(summary(data))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Simple linear model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model &lt;- lm(y ~ x, data = data)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat(&quot;\nLinear model summary:\n&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(summary(model))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Create a plot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p &lt;- ggplot(data, aes(x = x, y = y, color = group)) +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  geom_point(alpha = 0.7) +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  geom_smooth(method = &quot;lm&quot;, se = TRUE) +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  theme_minimal() +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labs(title = &quot;Sample Analysis&quot;, x = &quot;X Variable&quot;, y = &quot;Y Variable&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ggsave(&quot;/output/analysis_plot.png&quot;, p, width = 10, height = 6, dpi = 150)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat(&quot;\nPlot saved to /output/analysis_plot.png\n&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-2-write-the-dockerfile-1">Step 2: Write the Dockerfile<a href="#step-2-write-the-dockerfile-1" class="hash-link" aria-label="Direct link to Step 2: Write the Dockerfile" title="Direct link to Step 2: Write the Dockerfile" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; Dockerfile &lt;&lt; &#x27;EOF&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># R statistical computing container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM rocker/tidyverse:4.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Metadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LABEL maintainer=&quot;your.email@example.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LABEL description=&quot;R statistical analysis environment&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LABEL version=&quot;1.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Install additional R packages if needed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN R -e &quot;install.packages(c(&#x27;ggplot2&#x27;, &#x27;dplyr&#x27;), repos=&#x27;https://cloud.r-project.org&#x27;)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set working directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy the analysis script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY analysis.R .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Create output directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN mkdir -p /output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Default command</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD [&quot;Rscript&quot;, &quot;analysis.R&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-3-build-and-run">Step 3: Build and Run<a href="#step-3-build-and-run" class="hash-link" aria-label="Direct link to Step 3: Build and Run" title="Direct link to Step 3: Build and Run" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker build -t r-analysis:1.0 .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker run -v $(pwd)/output:/output r-analysis:1.0</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="environment-variables">Environment Variables<a href="#environment-variables" class="hash-link" aria-label="Direct link to Environment Variables" title="Direct link to Environment Variables" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="setting-environment-variables">Setting Environment Variables<a href="#setting-environment-variables" class="hash-link" aria-label="Direct link to Setting Environment Variables" title="Direct link to Setting Environment Variables" translate="no">​</a></h3>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Set a single variable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENV MY_VAR=value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set multiple variables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENV APP_HOME=/app \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    APP_VERSION=1.0 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PYTHONUNBUFFERED=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Use variables in subsequent commands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR $APP_HOME</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="using-arg-for-build-time-variables">Using ARG for Build-time Variables<a href="#using-arg-for-build-time-variables" class="hash-link" aria-label="Direct link to Using ARG for Build-time Variables" title="Direct link to Using ARG for Build-time Variables" translate="no">​</a></h3>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Define build argument with default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ARG PYTHON_VERSION=3.11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Use in FROM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM python:${PYTHON_VERSION}-slim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ARG values don&#x27;t persist to runtime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ARG BUILD_DATE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LABEL build_date=${BUILD_DATE}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Convert ARG to ENV if needed at runtime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ARG APP_VERSION=1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENV APP_VERSION=${APP_VERSION}</span><br></span></code></pre></div></div>
<p>Build with custom arguments:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker build --build-arg PYTHON_VERSION=3.10 --build-arg BUILD_DATE=$(date -I) -t myapp:1.0 .</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="pushing-to-container-registries">Pushing to Container Registries<a href="#pushing-to-container-registries" class="hash-link" aria-label="Direct link to Pushing to Container Registries" title="Direct link to Pushing to Container Registries" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="docker-hub">Docker Hub<a href="#docker-hub" class="hash-link" aria-label="Direct link to Docker Hub" title="Direct link to Docker Hub" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Login to Docker Hub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Tag your image for Docker Hub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker tag datascience:1.0 yourusername/datascience:1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Push to Docker Hub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker push yourusername/datascience:1.0</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="github-container-registry">GitHub Container Registry<a href="#github-container-registry" class="hash-link" aria-label="Direct link to GitHub Container Registry" title="Direct link to GitHub Container Registry" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Login to GitHub Container Registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $GITHUB_TOKEN | docker login ghcr.io -u USERNAME --password-stdin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Tag for GHCR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker tag datascience:1.0 ghcr.io/yourusername/datascience:1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Push</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker push ghcr.io/yourusername/datascience:1.0</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="using-your-image-on-ace-hpc">Using Your Image on ACE HPC<a href="#using-your-image-on-ace-hpc" class="hash-link" aria-label="Direct link to Using Your Image on ACE HPC" title="Direct link to Using Your Image on ACE HPC" translate="no">​</a></h3>
<p>Once pushed, you can use it on ACE:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># On ACE HPC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module load apptainer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Pull from Docker Hub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apptainer pull docker://yourusername/datascience:1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Or from GitHub Container Registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apptainer pull docker://ghcr.io/yourusername/datascience:1.0</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="exercise-4-complete-workflow">Exercise 4: Complete Workflow<a href="#exercise-4-complete-workflow" class="hash-link" aria-label="Direct link to Exercise 4: Complete Workflow" title="Direct link to Exercise 4: Complete Workflow" translate="no">​</a></h2>
<p>Let&#x27;s put it all together with a complete example.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-1-create-a-bioinformatics-tool-container">Step 1: Create a Bioinformatics Tool Container<a href="#step-1-create-a-bioinformatics-tool-container" class="hash-link" aria-label="Direct link to Step 1: Create a Bioinformatics Tool Container" title="Direct link to Step 1: Create a Bioinformatics Tool Container" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p ~/bioinfo-container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/bioinfo-container</span><br></span></code></pre></div></div>
<p>Create a simple sequence analysis script:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; seq_analysis.py &lt;&lt; &#x27;EOF&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#!/usr/bin/env python3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;&quot;&quot;Simple sequence analysis tool.&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import argparse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from collections import Counter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def gc_content(sequence):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;Calculate GC content of a DNA sequence.&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sequence = sequence.upper()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gc = sequence.count(&#x27;G&#x27;) + sequence.count(&#x27;C&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return gc / len(sequence) * 100 if sequence else 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def nucleotide_freq(sequence):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;Calculate nucleotide frequencies.&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return Counter(sequence.upper())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def main():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    parser = argparse.ArgumentParser(description=&#x27;Analyze DNA sequences&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    parser.add_argument(&#x27;--sequence&#x27;, &#x27;-s&#x27;, type=str, help=&#x27;DNA sequence to analyze&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    parser.add_argument(&#x27;--file&#x27;, &#x27;-f&#x27;, type=str, help=&#x27;File containing sequence&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    args = parser.parse_args()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if args.file:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        with open(args.file) as f:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sequence = &#x27;&#x27;.join(line.strip() for line in f if not line.startswith(&#x27;&gt;&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    elif args.sequence:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sequence = args.sequence</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Default example sequence</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sequence = &quot;ATGCGATCGATCGATCGATCGATCGATCGATCGATCG&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;=&quot; * 50)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;Sequence Analysis Results&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;=&quot; * 50)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(f&quot;Sequence length: {len(sequence)} bp&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(f&quot;GC content: {gc_content(sequence):.2f}%&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;\nNucleotide frequencies:&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for nuc, count in sorted(nucleotide_freq(sequence).items()):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print(f&quot;  {nuc}: {count} ({count/len(sequence)*100:.1f}%)&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;=&quot; * 50)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == &quot;__main__&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-2-write-the-dockerfile-2">Step 2: Write the Dockerfile<a href="#step-2-write-the-dockerfile-2" class="hash-link" aria-label="Direct link to Step 2: Write the Dockerfile" title="Direct link to Step 2: Write the Dockerfile" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; Dockerfile &lt;&lt; &#x27;EOF&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Bioinformatics analysis tool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM python:3.11-slim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LABEL maintainer=&quot;your.email@example.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LABEL description=&quot;DNA sequence analysis tool&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LABEL version=&quot;1.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Create non-root user for security</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN useradd -m -s /bin/bash biouser</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set working directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy application</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY seq_analysis.py .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN chmod +x seq_analysis.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Switch to non-root user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">USER biouser</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set entrypoint for flexible usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENTRYPOINT [&quot;python&quot;, &quot;seq_analysis.py&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Default arguments (can be overridden)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD [&quot;--help&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-3-build">Step 3: Build<a href="#step-3-build" class="hash-link" aria-label="Direct link to Step 3: Build" title="Direct link to Step 3: Build" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker build -t seq-analysis:1.0 .</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-4-test-different-usage-patterns">Step 4: Test Different Usage Patterns<a href="#step-4-test-different-usage-patterns" class="hash-link" aria-label="Direct link to Step 4: Test Different Usage Patterns" title="Direct link to Step 4: Test Different Usage Patterns" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Show help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker run seq-analysis:1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Analyze a sequence directly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker run seq-analysis:1.0 --sequence &quot;ATGCGATCGATCGATCG&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Analyze from a file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;&gt;sample&quot; &gt; test.fasta</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;ATGCGATCGATCGATCGATCGATCGATCG&quot; &gt;&gt; test.fasta</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker run -v $(pwd):/data seq-analysis:1.0 --file /data/test.fasta</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-5-push-and-use-on-ace">Step 5: Push and Use on ACE<a href="#step-5-push-and-use-on-ace" class="hash-link" aria-label="Direct link to Step 5: Push and Use on ACE" title="Direct link to Step 5: Push and Use on ACE" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Tag and push</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker tag seq-analysis:1.0 yourusername/seq-analysis:1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker push yourusername/seq-analysis:1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># On ACE HPC:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># module load apptainer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># apptainer exec docker://yourusername/seq-analysis:1.0 --sequence &quot;ATGCGATCG&quot;</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="dockerfile-best-practices-summary">Dockerfile Best Practices Summary<a href="#dockerfile-best-practices-summary" class="hash-link" aria-label="Direct link to Dockerfile Best Practices Summary" title="Direct link to Dockerfile Best Practices Summary" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-order-instructions-by-change-frequency">1. Order Instructions by Change Frequency<a href="#1-order-instructions-by-change-frequency" class="hash-link" aria-label="Direct link to 1. Order Instructions by Change Frequency" title="Direct link to 1. Order Instructions by Change Frequency" translate="no">​</a></h3>
<p>Put instructions that change rarely at the top:</p>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FROM python:3.11-slim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># System deps (rarely change)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    build-essential \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;&amp; rm -rf /var/lib/apt/lists/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Python deps (change occasionally)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY requirements.txt .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN pip install --no-cache-dir -r requirements.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Application code (changes frequently)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY src/ /app/src/</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-combine-run-commands">2. Combine RUN Commands<a href="#2-combine-run-commands" class="hash-link" aria-label="Direct link to 2. Combine RUN Commands" title="Direct link to 2. Combine RUN Commands" translate="no">​</a></h3>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Bad: Multiple layers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt-get update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt-get install -y curl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt-get clean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Good: Single layer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt-get update \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;&amp; apt-get install -y --no-install-recommends curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;&amp; apt-get clean \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;&amp; rm -rf /var/lib/apt/lists/*</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-use-specific-tags">3. Use Specific Tags<a href="#3-use-specific-tags" class="hash-link" aria-label="Direct link to 3. Use Specific Tags" title="Direct link to 3. Use Specific Tags" translate="no">​</a></h3>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Bad: Tag can change</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM python:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Good: Specific version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM python:3.11.4-slim</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-dont-include-secrets">4. Don&#x27;t Include Secrets<a href="#4-dont-include-secrets" class="hash-link" aria-label="Direct link to 4. Don&#x27;t Include Secrets" title="Direct link to 4. Don&#x27;t Include Secrets" translate="no">​</a></h3>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># NEVER do this</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENV API_KEY=secret123</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY credentials.json /app/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Instead, mount secrets at runtime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># docker run -v ~/.aws:/root/.aws:ro myimage</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="5-add-metadata">5. Add Metadata<a href="#5-add-metadata" class="hash-link" aria-label="Direct link to 5. Add Metadata" title="Direct link to 5. Add Metadata" translate="no">​</a></h3>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">LABEL maintainer=&quot;email@example.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LABEL version=&quot;1.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LABEL description=&quot;What this container does&quot;</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="troubleshooting-common-issues">Troubleshooting Common Issues<a href="#troubleshooting-common-issues" class="hash-link" aria-label="Direct link to Troubleshooting Common Issues" title="Direct link to Troubleshooting Common Issues" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="build-fails-package-not-found">Build Fails: &quot;Package not found&quot;<a href="#build-fails-package-not-found" class="hash-link" aria-label="Direct link to Build Fails: &quot;Package not found&quot;" title="Direct link to Build Fails: &quot;Package not found&quot;" translate="no">​</a></h3>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Always update package lists first</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt-get update &amp;&amp; apt-get install -y package-name</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="build-fails-permission-denied">Build Fails: &quot;Permission denied&quot;<a href="#build-fails-permission-denied" class="hash-link" aria-label="Direct link to Build Fails: &quot;Permission denied&quot;" title="Direct link to Build Fails: &quot;Permission denied&quot;" translate="no">​</a></h3>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Make scripts executable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY script.sh .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN chmod +x script.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Or use proper ownership</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY --chown=user:user files/ /app/</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="image-too-large">Image Too Large<a href="#image-too-large" class="hash-link" aria-label="Direct link to Image Too Large" title="Direct link to Image Too Large" translate="no">​</a></h3>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Use slim base images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM python:3.11-slim  # Not python:3.11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Clean up in the same layer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt-get update \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;&amp; apt-get install -y --no-install-recommends pkg \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;&amp; rm -rf /var/lib/apt/lists/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Use --no-cache-dir for pip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN pip install --no-cache-dir -r requirements.txt</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="container-exits-immediately">Container Exits Immediately<a href="#container-exits-immediately" class="hash-link" aria-label="Direct link to Container Exits Immediately" title="Direct link to Container Exits Immediately" translate="no">​</a></h3>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Ensure CMD/ENTRYPOINT keeps running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD [&quot;python&quot;, &quot;-u&quot;, &quot;app.py&quot;]  # -u for unbuffered output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Or for debugging, keep container running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD [&quot;tail&quot;, &quot;-f&quot;, &quot;/dev/null&quot;]</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary" translate="no">​</a></h2>
<p>In this tutorial, you learned:</p>
<ul>
<li class="">How to write Dockerfiles using common instructions</li>
<li class="">How to choose appropriate base images</li>
<li class="">How to manage dependencies and files</li>
<li class="">How to build and tag images</li>
<li class="">How to push images to registries</li>
<li class="">Best practices for efficient, secure containers</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next Steps" title="Direct link to Next Steps" translate="no">​</a></h2>
<p>Continue to <strong><a class="" href="/ace-ug-hpc-wiki/docs/tutorials/containers/advanced-builds">Advanced Build Topics</a></strong> to learn about:</p>
<ul>
<li class="">Multi-stage builds for smaller images</li>
<li class="">GPU-enabled containers</li>
<li class="">MPI for parallel computing</li>
<li class="">Optimization techniques</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="additional-resources">Additional Resources<a href="#additional-resources" class="hash-link" aria-label="Direct link to Additional Resources" title="Direct link to Additional Resources" translate="no">​</a></h2>
<ul>
<li class=""><a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="noopener noreferrer" class="">Dockerfile Reference</a></li>
<li class=""><a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/" target="_blank" rel="noopener noreferrer" class="">Docker Build Best Practices</a></li>
<li class=""><a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer" class="">Docker Hub</a> - Find and share container images</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tutorials/containers/containerize-code.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/ace-ug-hpc-wiki/docs/tutorials/containers/intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">What are Containers ?</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ace-ug-hpc-wiki/docs/tutorials/containers/containers-hpc"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Containers on HPC</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#learning-objectives" class="table-of-contents__link toc-highlight">Learning Objectives</a></li><li><a href="#what-is-a-dockerfile" class="table-of-contents__link toc-highlight">What is a Dockerfile?</a></li><li><a href="#dockerfile-instructions-reference" class="table-of-contents__link toc-highlight">Dockerfile Instructions Reference</a></li><li><a href="#exercise-1-your-first-dockerfile" class="table-of-contents__link toc-highlight">Exercise 1: Your First Dockerfile</a><ul><li><a href="#step-1-create-a-project-directory" class="table-of-contents__link toc-highlight">Step 1: Create a Project Directory</a></li><li><a href="#step-2-create-a-python-script" class="table-of-contents__link toc-highlight">Step 2: Create a Python Script</a></li><li><a href="#step-3-write-the-dockerfile" class="table-of-contents__link toc-highlight">Step 3: Write the Dockerfile</a></li><li><a href="#step-4-build-the-image" class="table-of-contents__link toc-highlight">Step 4: Build the Image</a></li><li><a href="#step-5-run-the-container" class="table-of-contents__link toc-highlight">Step 5: Run the Container</a></li></ul></li><li><a href="#understanding-base-images" class="table-of-contents__link toc-highlight">Understanding Base Images</a><ul><li><a href="#common-base-images" class="table-of-contents__link toc-highlight">Common Base Images</a></li><li><a href="#choosing-a-base-image" class="table-of-contents__link toc-highlight">Choosing a Base Image</a></li></ul></li><li><a href="#exercise-2-python-data-science-container" class="table-of-contents__link toc-highlight">Exercise 2: Python Data Science Container</a><ul><li><a href="#step-1-create-project-files" class="table-of-contents__link toc-highlight">Step 1: Create Project Files</a></li><li><a href="#step-2-write-the-dockerfile" class="table-of-contents__link toc-highlight">Step 2: Write the Dockerfile</a></li><li><a href="#step-3-build-and-test" class="table-of-contents__link toc-highlight">Step 3: Build and Test</a></li></ul></li><li><a href="#working-with-files-and-dependencies" class="table-of-contents__link toc-highlight">Working with Files and Dependencies</a><ul><li><a href="#copying-files" class="table-of-contents__link toc-highlight">Copying Files</a></li><li><a href="#using-dockerignore" class="table-of-contents__link toc-highlight">Using .dockerignore</a></li><li><a href="#installing-system-packages" class="table-of-contents__link toc-highlight">Installing System Packages</a></li></ul></li><li><a href="#exercise-3-r-statistical-container" class="table-of-contents__link toc-highlight">Exercise 3: R Statistical Container</a><ul><li><a href="#step-1-create-project-files-1" class="table-of-contents__link toc-highlight">Step 1: Create Project Files</a></li><li><a href="#step-2-write-the-dockerfile-1" class="table-of-contents__link toc-highlight">Step 2: Write the Dockerfile</a></li><li><a href="#step-3-build-and-run" class="table-of-contents__link toc-highlight">Step 3: Build and Run</a></li></ul></li><li><a href="#environment-variables" class="table-of-contents__link toc-highlight">Environment Variables</a><ul><li><a href="#setting-environment-variables" class="table-of-contents__link toc-highlight">Setting Environment Variables</a></li><li><a href="#using-arg-for-build-time-variables" class="table-of-contents__link toc-highlight">Using ARG for Build-time Variables</a></li></ul></li><li><a href="#pushing-to-container-registries" class="table-of-contents__link toc-highlight">Pushing to Container Registries</a><ul><li><a href="#docker-hub" class="table-of-contents__link toc-highlight">Docker Hub</a></li><li><a href="#github-container-registry" class="table-of-contents__link toc-highlight">GitHub Container Registry</a></li><li><a href="#using-your-image-on-ace-hpc" class="table-of-contents__link toc-highlight">Using Your Image on ACE HPC</a></li></ul></li><li><a href="#exercise-4-complete-workflow" class="table-of-contents__link toc-highlight">Exercise 4: Complete Workflow</a><ul><li><a href="#step-1-create-a-bioinformatics-tool-container" class="table-of-contents__link toc-highlight">Step 1: Create a Bioinformatics Tool Container</a></li><li><a href="#step-2-write-the-dockerfile-2" class="table-of-contents__link toc-highlight">Step 2: Write the Dockerfile</a></li><li><a href="#step-3-build" class="table-of-contents__link toc-highlight">Step 3: Build</a></li><li><a href="#step-4-test-different-usage-patterns" class="table-of-contents__link toc-highlight">Step 4: Test Different Usage Patterns</a></li><li><a href="#step-5-push-and-use-on-ace" class="table-of-contents__link toc-highlight">Step 5: Push and Use on ACE</a></li></ul></li><li><a href="#dockerfile-best-practices-summary" class="table-of-contents__link toc-highlight">Dockerfile Best Practices Summary</a><ul><li><a href="#1-order-instructions-by-change-frequency" class="table-of-contents__link toc-highlight">1. Order Instructions by Change Frequency</a></li><li><a href="#2-combine-run-commands" class="table-of-contents__link toc-highlight">2. Combine RUN Commands</a></li><li><a href="#3-use-specific-tags" class="table-of-contents__link toc-highlight">3. Use Specific Tags</a></li><li><a href="#4-dont-include-secrets" class="table-of-contents__link toc-highlight">4. Don&#39;t Include Secrets</a></li><li><a href="#5-add-metadata" class="table-of-contents__link toc-highlight">5. Add Metadata</a></li></ul></li><li><a href="#troubleshooting-common-issues" class="table-of-contents__link toc-highlight">Troubleshooting Common Issues</a><ul><li><a href="#build-fails-package-not-found" class="table-of-contents__link toc-highlight">Build Fails: &quot;Package not found&quot;</a></li><li><a href="#build-fails-permission-denied" class="table-of-contents__link toc-highlight">Build Fails: &quot;Permission denied&quot;</a></li><li><a href="#image-too-large" class="table-of-contents__link toc-highlight">Image Too Large</a></li><li><a href="#container-exits-immediately" class="table-of-contents__link toc-highlight">Container Exits Immediately</a></li></ul></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li><li><a href="#next-steps" class="table-of-contents__link toc-highlight">Next Steps</a></li><li><a href="#additional-resources" class="table-of-contents__link toc-highlight">Additional Resources</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/ace-ug-hpc-wiki/docs/intro">Get Started</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Quick Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://ace.ac.ug" target="_blank" rel="noopener noreferrer" class="footer__link-item">ACE Website<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.niaid.nih.gov/research/african-centers-excellence" target="_blank" rel="noopener noreferrer" class="footer__link-item">NIAID/NIH<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/AceUganda?t=xKzAByMBVx5YtuP29hT95A&amp;s=08" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 ACE WIKI, ACE - Uganda. Wasukira Ian.</div></div></div></footer></div>
</body>
</html>